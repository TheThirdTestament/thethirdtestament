@inherits Umbraco.Web.Macros.PartialViewMacroPage
@{
    var root = Model.Content.Root();
    var mainMenu = root.Children.Where(x => x.IsVisible()).ToArray(); 
    
}
    <ul class="navbar-nav">
        <li class="nav-item @(Model.Content.Name == root.Name ? "active" : null)">
            <a class="nav-link" href="@root.Url">@root.Name</a>
        </li>
        @foreach (var menuItem in mainMenu)
        {
            if (menuItem.Children().Where(x => x.IsVisible()).Count() > 0 && menuItem.Name != "Articles" && menuItem.Name != "Symbols")
            {
                <li class="nav-item dropdown @(menuItem.IsAncestorOrSelf(Model.Content) ? "current" : null)">
                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" id="Preview" role="button" aria-haspopup="true" aria-expanded="false" href="@menuItem.Url">@menuItem.Name</a>

                    <div class="dropdown-menu" aria-labelledby="Preview">
                        @foreach (var subMenuItem in menuItem.Children())
                        {
                            <a class="nav-link @(menuItem.IsAncestorOrSelf(Model.Content) ? "current" : null)" href="@subMenuItem.Url">@subMenuItem.Name</a>
                        }

                    </div>
                </li>
            }
            else
            {
                <li class="nav-item @(menuItem.IsAncestorOrSelf(Model.Content) ? "current" : null)">
                    <a class="nav-link" href="@menuItem.Url">@menuItem.Name</a>
                </li>
            }
        }
    </ul>
